function Bowling(){"use strict";function a(){this.input=!1,this.pinpos=[53,96,140,183,75,118,162,96,140,118],this.throws=[[0,0],[0,0],[0,0],[0,0],[0,0]],this.answers=[!0,!0,!0,!0,!0],this.throwidx=0,this.gameidx=0,this.gamethrow=function(t){if(t>=2||t<0)return-1;var n=t==undefined?this.throwidx:t,r=this.gameidx;return this.throws[r][n]},this.getthrow=function(t,n){if(t>=5||n>=2)return-1;var r=n==undefined?this.throwidx:n,i=t==undefined?this.gameidx:t;return this.throws[i][r]},this.setthrow=function(t){if(this.gameidx>4)return;this.throws[this.gameidx][this.throwidx]=t},this.nextthrow=function(){if(this.gameidx>4)return;this.gameidx+=this.throwidx,this.throwidx=(this.throwidx+1)%2;return}}function f(){l(),$("#bowling_page").hide(),$("#bowling_win_page").hide(),setTimeout(function(){$("#game_menu_border").hide(),$("#home_page").show()},0)}function l(){$("#bowling_win_page").hide(),o&&clearTimeout(o),b(),g();var e=1;$("#bowling_inset n").html(e.toLocaleString())}function c(){l(),u=new a,$("#home_page").hide(),$("#bowling_page").show(),i.present.play()}function h(){var e=0;for(var t=1;t<=5;t++){var n="#bowling_mini"+t;u.answers[t-1]?(e++,$(n).removeClass("red"),$(n).addClass("green")):($(n).removeClass("green"),$(n).addClass("red"));var s=u.getthrow(t-1,0),o=u.getthrow(t-1,1),a=s+o,f;$(n).empty();for(f=1;f<=s;f++)$(n).append('<div class="bowlingpinmicro m1p'+f+'"></div>');for(f=1;f<=o;f++)$(n).append('<div class="bowlingpinmicro m2p'+f+'"></div>');for(f=1;f<=a;f++)$(n).append('<div class="bowlingpinmicro m3p'+f+'"></div>');$(n).append('<div class="bowling_mval v1">'+s.toLocaleString()+"</div>"),$(n).append('<div class="bowling_mval v2">'+o.toLocaleString()+"</div>"),$(n).append('<div class="bowling_mval v3">'+a.toLocaleString()+"</div>")}e>=5?$("#bowling_msg3").html(r[0]):e>0?($("#bowling_msg3").html(r[1]),$("#bowling_msg3 c").html(e.toLocaleString())):$("#bowling_msg3").html(r[2]),$("#bowling_win_page").show(),i.present.play()}function p(e,t){var n;e>316?n=[]:e>270?n=[4]:e>245?n=[4,7]:e>230?n=[3,4,7]:e>214?n=[3,4,7,9]:e>202?n=[3,4,6,7,9]:e>190?n=[2,3,4,6,7,9]:e>178?n=[2,3,4,6,7,9,10]:e>165?n=[2,3,4,6,7,8,9,10]:e>155?n=[2,3,4,5,6,7,8,9,10]:e>145?n=[1,2,3,4,5,6,7,8,9,10]:e>140?n=[2,3,4,5,6,7,8,9,10]:e>135?n=[2,3,4,6,7,8,9,10]:e>130?n=[2,3,6,7,8,9,10]:e>120?n=[2,3,6,8,9,10]:e>115?n=[2,3,5,6,8,9,10]:e>110?n=[1,2,3,5,6,8,9,10]:e>105?n=[1,2,3,5,6,7,8,9,10]:e>95?n=[1,2,3,4,5,6,7,8,9,10]:e>85?n=[1,2,3,5,6,7,8,9,10]:e>72?n=[1,2,3,5,6,8,9,10]:e>60?n=[1,2,3,5,6,8,10]:e>48?n=[1,2,3,5,6,8]:e>36?n=[1,2,5,6,8]:e>20?n=[1,2,5,8]:e>5?n=[1,2,5]:e>-20?n=[1,5]:e>-66?n=[1]:n=[],u.setthrow(n.length);for(var r=0;r<n.length;r++)t>u.pinpos[r]?$("#bowling_pin"+n[r]).addClass("flyleft"):$("#bowling_pin"+n[r]).addClass("flyright")}function d(){if(s){s=!1,$("#bowling_ball_rolling").css("opacity","0"),$("#bowling_ball_rolling").css("-webkit-transition","-webkit-transform 0.1s linear"),$("#bowling_ball_rolling").css("-webkit-transform","translate(0px, 0px) scale(1)");var e=u.getthrow();if(u.throwidx==0){$("#bowling_val1").html(e.toLocaleString()),$("#bowling_msg2 n").html(e.toLocaleString()),$("#bowling_page").addClass("state1"),o=setTimeout(y,1500);var t=u.gameidx+1;$("#bowling_inset n").html(t.toLocaleString())}else $("#bowling_val2").html(e.toLocaleString()),$("#bowling_page").addClass("state2");for(var n=1;n<=e;n++){var r="#bowling_t"+(u.throwidx+1)+"p"+n;$(r).addClass("show")}}}function v(e){if(e&&e.srcElement&&e.srcElement.id){var t=e.srcElement.id;t.startsWith("bowling_pin")&&$("#"+t).hide()}}function m(e){if(e&&e.srcElement&&e.srcElement.id){var t=e.srcElement.id;t.startsWith("bowling_pin")&&$("#"+t+"shadow").hide()}}function g(){for(var e=1;e<=10;e++)$("#bowling_pin"+e).removeClass("flyleft flyright"),$("#bowling_pin"+e).show(),$("#bowling_pin"+e+"shadow").show();$("#bowling_rollbutton").removeClass("active"),$("#bowling_ball").show()}function y(){u.nextthrow(),u.gameidx>4?h():g()}function b(){$("#bowling_page").removeClass("state1 state2 state3"),$("#bowling_val1").empty(),$("#bowling_val2").empty();for(var e=1;e<=2;e++)for(var t=1;t<=10;t++){var n="#bowling_t"+e+"p"+t;$(n).removeClass("show")}}function w(){if($("#bowling_rollbutton").hasClass("active"))return;s=!0,$("#bowling_rollbutton").addClass("active");var e=parseInt($("#bowling_ball").css("left"));$("#bowling_ball").hide(),$("#bowling_ball_rolling").css("left",e-12+"px");var t=Math.floor((110-e)/125*61);$("#bowling_ball_rolling").css("opacity","1"),$("#bowling_ball_rolling").css("-webkit-transition","-webkit-transform 1.3s linear"),$("#bowling_ball_rolling").css("-webkit-transform","translate("+t+"px, -224px) scale(0.4)"),p(e,e+t),e>48&&e<=190?i.rollmany.play():e>-66&&e<=316?i.rollfew.play():i.gutterball.play()}function E(r){var s=u.gameidx,o=u.gamethrow(0)+u.gamethrow(1);r==o?($("#bowling_dialog").removeClass("incorrect"),$("#bowling_dialog").addClass("correct"),i.correct.play(),u.answers[s]=!0):($("#bowling_dialog").removeClass("correct"),$("#bowling_dialog").addClass("incorrect"),i.incorrect.play(),u.answers[s]=!1);var a=5-s-1;a>1?($("#bowling_correct").html(e),$("#bowling_correct n").html(a.toLocaleString())):a==1?$("#bowling_correct").html(t):$("#bowling_correct").html(n),$("#bowling_page").addClass("state3")}function S(){var e="";$("#bowling_scoregrid").empty();for(var t=0;t<20;t++){var n="t"+(Math.floor(t/10)+1)+"p"+(t%10+1);e+='<div id="bowling_'+n+'" class="bowlingpinmini"></div>'}$("#bowling_scoregrid").html(e),$("#bowling_numbertray").empty();for(var t=0;t<=20;t++)e+='<div id="bowling_numbtn'+t+'" class="bowlingnumbtn">'+t+"</div>";$("#bowling_numbertray").html(e),$(".bowlingnumbtn").click(function(){E(parseInt(this.id.slice(14)))})}function x(){setTimeout(S,0),e="<b>Great job!</b><br>You chose the right answer!<br>You have <n></n> more games to go.",t="<b>Great job!</b><br>You chose the right answer!<br>You have <n>1</n> more game to go.",n="<b>Great job!</b><br>You chose the right answer!<br>You're done, continue to see your score.",r[0]="<b>Great job!</b><br>You chose the correct answers for all <b>5</b> games.",r[1]="<b>Pretty good!</b><br>You chose the correct answers for <c></c> of 5 games.",r[2]="<b>Oops!</b><br>You chose the wrong answers.<br>Don't worry, you'll do better next time.",window.chrome&&window.chrome.i18n&&($("#bowling_rollbutton").html(chrome.i18n.getMessage("bowling_rollbutton")),$("#bowling_msg1").html(chrome.i18n.getMessage("bowling_msg1")),$("#bowling_msg2").html(chrome.i18n.getMessage("bowling_msg2")),$("#bowling_msg3").html(chrome.i18n.getMessage("bowling_msg3")),$("#bowling_inset").html(chrome.i18n.getMessage("bowling_inset")),$("#bowling_label1").html(chrome.i18n.getMessage("bowling_label1")),$("#bowling_label2").html(chrome.i18n.getMessage("bowling_label2")),$("#bowling_label3").html(chrome.i18n.getMessage("bowling_label3")),$("#bowling_correct").html(chrome.i18n.getMessage("bowling_correctp")),e=chrome.i18n.getMessage("bowling_correctp"),t=chrome.i18n.getMessage("bowling_corrects"),n=chrome.i18n.getMessage("bowling_correctz"),$("#bowling_incorrect").html(chrome.i18n.getMessage("bowling_incorrect")),$("#bowling_next").html(chrome.i18n.getMessage("bowling_next")),$("#bowling_tryagain").html(chrome.i18n.getMessage("bowling_tryagain")),$("#bowling_quit").html(chrome.i18n.getMessage("bowling_quit"))),s=!1;var o=document.getElementById("bowling_ball_rolling");o.addEventListener("webkitTransitionEnd",d,!1);for(var u=1;u<=10;u++)o=document.getElementById("bowling_pin"+u),o.addEventListener("webkitAnimationEnd",v,!1),o.addEventListener("webkitAnimationStart",m,!1);i.gutterball=new GameSound("audio/Bowling_BallMove.ogg",1),i.rollmany=new GameSound("audio/Bowling_KnockOverPins_01.ogg",1),i.rollfew=new GameSound("audio/Bowling_KnockOverPins_02.ogg",1),i.present=new GameSound("audio/Bowling_PresentAnswer.ogg",1),i.correct=new GameSound("audio/Bowling_CorrectAnswer.ogg",1),i.incorrect=new GameSound("audio/Bowling_IncorrectAnswer.ogg",1),$("#bowling_rollbutton").click(function(){w()}),$("#bowling_quit").click(f),$("#bowling_tryagain").click(function(){$("#bowling_page").removeClass("state3")}),$("#bowling_next").click(function(){b(),y()}),$("#bowling_win_page").click(function(){f()})}var e,t,n,r=[],i={},s=!1,o,u;this.close=f,this.start=c,x()}